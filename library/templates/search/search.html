{% extends 'base.html' %} {% block content %}
<h2>
  Search: "{{ query }}" {{ 'in ' + filter_category.capitalize() if
  filter_category != ""}} ({{
      book_result_count + author_result_count + publisher_result_count
  }} result{{ 
      's' if book_result_count + author_result_count + publisher_result_count != 1
  }})
</h2>
{% if recommend_all_books_from_year %}
<a href="{{ url_for('books_bp.books', year=query) }}"
  >See all books from {{ query }}</a
>
<h3>Books</h3>
{% endif %} {% if books|length > 0 %}
<div class="list book-list">
  {% for book in books %}
  <a
    href="{{ url_for('books_bp.book', id=book.book_id) }}"
    class="list__item book-list__book"
    style="background-image: url('http://covers.openlibrary.org/b/isbn/{{ book.isbn }}.jpg'), url({{ url_for('static', filename='images/placeholder_book_cover.jpg') }})"
  >
    <h3>{{ book.title }}</h3>
  </a>
  {% endfor %} {% if filter_category == "" and book_result_count > 4 %}
  <a
    class="list__item book-list__book more-button"
    href="{{ url_for('search_bp.search', q=query, filter='books') }}"
    >All book results &rarr;</a
  >
  {% endif %}
</div>
{% else %}
<p>No results found. Try widening your search.</p>
{% endif %}
<h3>Authors</h3>
{% if authors|length > 0 %}
<div class="list">
  {% for author in authors %}
  <a
    class="list__item"
    href="{{ url_for('books_bp.books', author=author.unique_id) }}"
  >
    <h3>{{ author.full_name }}</h3>
  </a>
  {% endfor %} {% if filter_category == "" and author_result_count > 4 %}
  <a
    class="list__item more-button"
    href="{{ url_for('search_bp.search', q=query, filter='authors') }}"
    >All author results &rarr;</a
  >
  {% endif %}
</div>
{% else %}
<p>No results found. Try widening your search.</p>
{% endif %}
<h3>Publishers</h3>
{% if publishers|length > 0 %}
<div class="list">
  {% for publisher in publishers %}
  <a
    class="list__item"
    href="{{ url_for('books_bp.books', publisher=publisher.name) }}"
  >
    <h3>{{ publisher.name }}</h3>
  </a>
  {% endfor %} {% if (filter_category == "") and (publisher_result_count > 4) %}
  <a
    class="list__item more-button"
    href="{{ url_for('search_bp.search', q=query, filter='publishers') }}"
    >All publisher results &rarr;</a
  >
  {% endif %}
</div>
{% else %}
<p>No results found. Try widening your search.</p>
{% endif %} {% endblock %}
